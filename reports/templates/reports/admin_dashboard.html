{% extends "base.html" %}
{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±{% endblock %}

{% block head %}
<style>
  .wrap{max-width:1100px;margin:auto;padding:18px}
  .kpis{display:grid;gap:12px;margin-top:8px}
  @media(min-width:700px){.kpis{grid-template-columns:repeat(5,1fr)}}
  .kpi{background:var(--card,#fff);border:1px solid var(--line,#e5e7eb);border-radius:14px;padding:16px;box-shadow:0 10px 26px rgba(2,6,23,.08)}
  .kpi .num{font-weight:900;font-size:1.6rem;color:var(--brand,#2563eb)}
  .kpi .lbl{color:var(--muted,#6b7280);font-weight:800}
  .grid{display:grid;gap:14px;margin-top:16px}
  @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
  .tile{display:flex;gap:12px;align-items:center;background:#fff;border:1px solid var(--line,#e5e7eb);border-radius:14px;padding:16px;text-decoration:none;color:inherit;box-shadow:0 10px 26px rgba(2,6,23,.08)}
  .tile:hover{border-color:#dbeafe;background:#f8fbff}
  .tile.disabled{opacity:.6;pointer-events:none}
  .ico{width:46px;height:46px;border-radius:12px;display:grid;place-items:center;color:#fff;font-weight:900}
  .b1{background:linear-gradient(135deg,#2563eb,#60a5fa)}
  .b2{background:linear-gradient(135deg,#10b981,#34d399)}
  .b3{background:linear-gradient(135deg,#7c3aed,#a78bfa)}
  .b4{background:linear-gradient(135deg,#f59e0b,#fbbf24)}
  .b5{background:linear-gradient(135deg,#0ea5e9,#22d3ee)}
  .title{font-weight:900;margin:0;color:var(--ink-soft,#1f2937)}
  .muted{color:var(--muted,#6b7280);font-weight:700}
</style>
{% endblock %}

{% block content %}
<div class="wrap" dir="rtl">
  <h1 class="title">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±</h1>

  <section class="kpis" aria-label="Ù…Ø¤Ø´Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø©">
    <div class="kpi"><div class="num">{{ reports_count }}</div><div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div></div>
    <div class="kpi"><div class="num">{{ teachers_count }}</div><div class="lbl">Ø§Ù„Ù…Ø¹Ù„Ù‘Ù…ÙˆÙ†</div></div>
    <div class="kpi"><div class="num">{{ tickets_total }}</div><div class="lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div></div>
    <div class="kpi"><div class="num">{{ tickets_open }}</div><div class="lbl">Ø·Ù„Ø¨Ø§Øª Ø¬Ù€Ø¯ÙŠØ¯Ø©/Ù‚ÙŠØ¯</div></div>
    {# ØªØ¸Ù‡Ø± ÙÙ‚Ø· Ø¥Ø°Ø§ ÙˆÙØ±ØªÙ‡Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†ØªÙƒØ³Øª (Ù…Ø«Ù„Ø§Ù‹ count Ù„Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙØ¹Ø§Ù„Ø©) #}
    {% if reporttypes_count %}
      <div class="kpi"><div class="num">{{ reporttypes_count }}</div><div class="lbl">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div></div>
    {% endif %}
  </section>

  <section class="grid" aria-label="Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª">
    <a class="tile" href="{% url 'reports:admin_reports' %}">
      <div class="ico b1">ğŸ“„</div>
      <div><div class="title">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div><div class="muted">Ø¹Ø±Ø¶/ØªØµÙÙŠØ© ÙˆØ­Ø°Ù Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div></div>
    </a>

    <a class="tile" href="{% url 'reports:tickets_inbox' %}">
      <div class="ico b2">ğŸ“¬</div>
      <div><div class="title">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div><div class="muted">ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ­Ø§Ù„Ø§ØªÙ‡Ø§</div></div>
    </a>

    <a class="tile" href="{% url 'reports:manage_teachers' %}">
      <div class="ico b4">ğŸ‘©â€ğŸ«</div>
      <div><div class="title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ù„Ù‘Ù…ÙŠÙ†</div><div class="muted">Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù</div></div>
    </a>

    <a class="tile" href="{% url 'reports:departments_list' %}">
      <div class="ico b3">ğŸ·ï¸</div>
      <div>
        <div class="title">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
        <div class="muted">
          {% if has_dept_model %}Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù/Ø£Ø¹Ø¶Ø§Ø¡{% else %}Ø¥Ø³Ù†Ø§Ø¯ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙÙ‚Ø· (Ù…Ù† ROLE_CHOICES){% endif %}
        </div>
      </div>
    </a>

    {# ======= Ø§Ù„Ø¬Ø¯ÙŠØ¯: Ø¥Ø¯Ø§Ø±Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ======= #}
    {% if has_reporttype %}
      <a class="tile" href="{% url 'reports:reporttypes_list' %}">
        <div class="ico b5">ğŸ§©</div>
        <div>
          <div class="title">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
          <div class="muted">Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ (ØªØ¸Ù‡Ø± ÙÙŠ â€œÙ†ÙˆØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ±â€)</div>
        </div>
      </a>
    {% else %}
      <div class="tile disabled">
        <div class="ico b5">ğŸ§©</div>
        <div>
          <div class="title">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
          <div class="muted">ÙØ¹Ù‘Ù„ ReportType ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</div>
        </div>
      </div>
    {% endif %}
  </section>
</div>
{% endblock %}
