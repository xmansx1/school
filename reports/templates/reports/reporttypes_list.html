{% extends "base.html" %}
{% block title %}Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±{% endblock %}

{% block head %}
<style>
  :root{
    --ink:#0f172a; --muted:#6b7280; --line:#e5e7eb; --card:#fff;
    --brand:#2563eb; --accent:#10b981; --radius:12px; --shadow:0 8px 24px rgba(2,6,23,.06)
  }
  .wrap{max-width:1000px;margin:24px auto;padding:0 16px}

  .top{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:12px;flex-wrap:wrap}
  .top h1{margin:0;font-size:clamp(1.1rem,2.4vw,1.4rem)}

  .btn{padding:10px 14px;border-radius:10px;border:1px solid var(--line);background:var(--card);font-weight:800;cursor:pointer;text-decoration:none;color:var(--ink)}
  .btn-primary{background:linear-gradient(135deg,var(--brand),#3b82f6);border-color:transparent;color:#fff}
  .btn.danger{background:#b91c1c;color:#fff;border-color:transparent}
  .actions a,.actions form{display:inline-block;margin-inline-start:6px}
  .actions{display:flex;flex-wrap:wrap;gap:6px}

  /* ØºÙ„Ø§Ù Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù„ØªÙ…Ø±ÙŠØ± Ø£ÙÙ‚ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© */
  .table-wrap{background:transparent;border-radius:var(--radius);overflow:auto;border:1px solid var(--line)}
  table{width:100%;border-collapse:separate;border-spacing:0;border:0}
  thead th{position:sticky;top:0;background:#f8fafc;color:var(--muted);font-weight:900;text-align:right;border-bottom:1px solid var(--line)}
  th,td{padding:12px 14px}
  tbody tr{background:var(--card)}
  tbody tr+tr td{border-top:1px solid #f3f4f6}
  td .badge{display:inline-block;border-radius:999px;background:#eef2ff;color:#1f2937;padding:4px 10px;font-size:.85rem}

  /* Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ (stacked) */
  @media (max-width: 640px){
    .table-wrap{border:0}
    table, thead, tbody, th, tr{display:block}
    thead{display:none}
    tbody{display:grid;gap:10px}
    tbody tr{border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);overflow:hidden}
    tbody tr td{display:grid;grid-template-columns:8.5em 1fr;gap:8px;align-items:center;padding:10px 12px;border:0;border-bottom:1px solid #f1f5f9}
    tbody tr td:last-child{border-bottom:0}
    /* ØªØ³Ù…ÙŠØ§Øª Ø§Ù„Ø­Ù‚ÙˆÙ„ ØªÙØ³Ø­Ø¨ Ù…Ù† data-label */
    td::before{content:attr(data-label);font-weight:900;color:var(--muted)}
    /* Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ØªØªØ­ÙˆÙ„ Ù„ØµÙ Ø£Ø²Ø±Ø§Ø± */
    td.actions{grid-template-columns:1fr;gap:8px}
    td.actions .btn{width:100%;text-align:center}
  }

  .muted{color:var(--muted)}
</style>
{% endblock head %}

{% block content %}
<div class="wrap" dir="rtl">
  <div class="top">
    <h1>Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h1>
    {% if db_backed %}
      <a class="btn btn-primary" href="{% url 'reports:reporttype_create' %}">â• Ø¥Ø¶Ø§ÙØ© Ù†ÙˆØ¹</a>
    {% endif %}
  </div>

  {% if not db_backed %}
    <p class="muted">ØªØ¹Ø°Ù‘Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ø£Ù† Ù…ÙˆØ¯ÙŠÙ„ <code>ReportType</code> ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„. ØªÙØ¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¯Ù†Ø§Ù‡ Ù…Ø±Ø¬Ø¹ÙŠØ© ÙÙ‚Ø· Ù…Ù† Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ.</p>
  {% endif %}

  <div class="table-wrap" role="region" aria-label="Ø¬Ø¯ÙˆÙ„ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±">
    <table>
      <thead>
        <tr>
          <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
          <th>Ø§Ù„Ø±Ù…Ø² (code)</th>
          <th>Ø§Ù„Ø§Ø³Ù…</th>
          <th>Ù†Ø´Ø·</th>
          <th>ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø±ØªØ¨Ø·Ø©</th>
          {% if db_backed %}<th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>{% endif %}
        </tr>
      </thead>
      <tbody>
        {% for it in items %}
          <tr class="row">
            <td data-label="Ø§Ù„ØªØ±ØªÙŠØ¨">{{ it.order|default:"â€”" }}</td>
            <td data-label="Ø§Ù„Ø±Ù…Ø²"><span class="badge">{{ it.code }}</span></td>
            <td data-label="Ø§Ù„Ø§Ø³Ù…">{{ it.name }}</td>
            <td data-label="Ù†Ø´Ø·">{% if it.is_active %}âœ…{% else %}â›”{% endif %}</td>
            <td data-label="ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø±ØªØ¨Ø·Ø©">{{ it.count }}</td>

            {% if db_backed %}
            <td class="actions" data-label="Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª">
              <a class="btn" href="{% url 'reports:reporttype_update' it.obj.pk %}">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
              <form method="post" action="{% url 'reports:reporttype_delete' it.obj.pk %}"
                    onsubmit="return confirm('Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ØŸ Ù„Ù† ÙŠÙØ³Ù…Ø­ Ø¨Ø§Ù„Ø­Ø°Ù Ø¥Ù† ÙƒØ§Ù† Ù…Ø³ØªØ®Ø¯Ù…Ù‹Ø§.');">
                {% csrf_token %}
                <button class="btn danger" type="submit">ğŸ—‘ Ø­Ø°Ù</button>
              </form>
            </td>
            {% endif %}
          </tr>
        {% empty %}
          <tr class="row"><td data-label="" colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†ÙˆØ§Ø¹ Ø¨Ø¹Ø¯.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock content %}
